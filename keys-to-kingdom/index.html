<head>
<title>Keys to a kingdom - can you break a JS crypto?</title>
<link rel=stylesheet type=text/css href=http://nicolasgallagher.com/pure-css-speech-bubbles/demo/default.css >
<style>
p {text-align: center}
</style>
<script>
window.onmessage = function(e) {
  if (!e) e = this.event;
  var k = e.data;
  document.getElementById('key').innerHTML = k;
}

function crack(f) {
  document.getElementById('f').contentWindow.postMessage(f.elements['tryme'].value, '*');
  f.elements['tryme'].value = '';
  return false;
}
</script>
</head>
<body>
<div style="width: 700px; margin: 0 auto">
<h1>Keys to a kingdom!</h1>
<a href="https://twitter.com/share" class="twitter-share-button" data-via="kkotowicz" data-size="large">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
<p>A quick fun sidechannel, posssibly crypto challenge by <a href="http://blog.kotowicz.net">Krzysztof Kotowicz</a></p>
<h2>Rules</h2>
<ol>
<li>Remote kingdom posesses a secret. Every 2 seconds its king gives you a new key to crack
<li>If you can crack the key, enter the solution in the input field below and press the magical ENTER key
<li>Beware! Solutions expire, so you have only about 100 seconds to crack any key on average!
<li>Once in a while, you'll be getting expired solutions as a hint.
<li><strong>Make the kingdom display you the generated secret</strong>
<li>Modern browsers only. Respect the <a href="https://wiki.mozilla.org/Features/Platform/Iframe_Sandbox">iframe sandbox</a> rules (i.e. <strong>no direct access to remote.html DOM</strong>) for browsers that don't support it.
<li>You can look at the <a href="https://github.com/koto/blog-kotowicz-net-examples/tree/master/keys-to-kingdom">source</a>, copy the challenge to automate tasks, but no tampering with kingdom.html (e.g. Firebuging the computed secret/keys is a no-no).
<li>There's more than one way to skin a cat, so think outside the box.
</ol>
<div style="text-align: center">
<h1>Newest key to crack:</h1>
<p id=key>&nbsp;</p>
</div>
<img src="knight.png" style="float: right;">

<form style="margin: 0 200px; text-align: right" class="triangle-border right" onsubmit="return crack(this)" action=#>

<input id=tryme placeholder="Your solution is..." size=32 maxlength=32>
</form>
<iframe id=f sandbox=allow-scripts seamless style="width:700px; border: none; height: 450px;"></iframe>
<script>
  var f = document.getElementById('f');
  f.onload = function() {
    window.frames[0].postMessage(null, '*');
  }
  f.src = 'kingdom.html';

</script>
<p>
<small>
Used <a href="http://www.iconspedia.com/pack/desktop-boss-2-icons-3659/">http://www.iconspedia.com/pack/desktop-boss-2-icons-3659/</a>,
  <a href=http://icones.pro/en/knight-png-image.html>http://icones.pro/en/knight-png-image.html</a>,
  <a href="http://nicolasgallagher.com/pure-css-speech-bubbles/demo/">http://nicolasgallagher.com/pure-css-speech-bubbles/demo/</a> and <a href="http://pajhome.org.uk/crypt/md5">http://pajhome.org.uk/crypt/md5</a>.

<h1>Hall of Fame</h1>
<ul>
  <li>Juho Nurminen
  <li><a href="https://twitter.com/h43z">@h43z</a>
  <li><a href="https://twitter.com/_hlipinski">fuzzy</a> x3 <span style="font-size: 250%;vertical-align: middle;">&#9996;</span>
  <li><a href="https://twitter.com/garethheyes">@garethheyes</a>
  <li><a href="https://twitter.com/shafigullin">@shafigullin</a> x2
  <li><a href="https://twitter.om/cgvwzq">@cgvwzq</a>
  <li>EyalG
</ul>
<h2>Honorable mentions</h2>
<ul>
    <li><a href="https://twitter.com/HClO4Burns">@HClO4Burns</a>

</ul>
</div>
</body>
